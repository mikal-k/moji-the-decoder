<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moji the Decoder</title>

    <!-- Load Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/css/bootstrap.min.css"
      integrity="sha512-usVBAd66/NpVNfBge19gws2j6JZinnca12rAe2l+d+QkLU9fiG02O1X8Q6hepIpr/EYKZvKx/I9WsnujJuOmBA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Load custom CSS -->
    <link rel="stylesheet" href="neo.css" />
  </head>

  <body>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="0"
      height="0"
      style="position: absolute"
    >
      <filter id="retro-logo-filter">
        <feFlood flood-color="var(--primary-color)" result="flood" />
        <feComposite
          in="SourceGraphic"
          in2="flood"
          operator="in"
          result="masked"
        />
        <feMorphology
          in="masked"
          operator="dilate"
          radius="1"
          result="outline"
        />
        <feFlood flood-color="var(--text-color)" result="text-stroke" />
        <feComposite
          in="text-stroke"
          in2="outline"
          operator="in"
          result="text-stroke"
        />
        <feMerge>
          <feMergeNode in="text-stroke" />
          <feMergeNode in="SourceGraphic" />
        </feMerge>
      </filter>
    </svg>
    <div class="hodefolie">
      <h1>
        <span class="robot">üëÅÔ∏è‚Äçüó®Ô∏èü§ñ</span>
        <span class="terminator">Moji the Decoder</span>
      </h1>
    </div>
    <form id="decode-form">
      <label for="emoji-input">Enter Emoji:</label>
      <div class="form-group">
        <input type="text" class="form-control" id="emoji-input" required />
      </div>
      <div class="form-group">
        <button class="btn btn-primary" type="submit">Decode</button>
      </div>
    </form>

    <div id="result"></div>

    <!-- Load jQuery and Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js"
      integrity="sha512-a6ctI6w1kg3J4dSjknHj3aWLEbjitAXAjLDRUxo2wyYmDFRcz2RJuQr5M3Kt8O/TtUSp8n2rAyaXYy1sjoKmrQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script>
      document
        .getElementById("decode-form")
        .addEventListener("submit", async function (event) {
          event.preventDefault();
          const emojiInput = document.getElementById("emoji-input");
          const resultDiv = document.getElementById("result");
          const emoji = emojiInput.value;
          updateURLWithEmoji(emoji);

          if (!emoji) {
            resultDiv.textContent = "Please enter an emoji.";
            return;
          }

          const response = await fetch("/decode", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ emoji }),
          });

          let data;
          try {
            data = await response.json();
          } catch (error) {
            resultDiv.textContent = "Error: Could not parse server response.";
            return;
          }

          if (response.ok && data.name && data.codepoint) {
            resultDiv.innerHTML = `Emoji name: ${data.name}<br>Codepoint: ${data.codepoint}`;
          } else {
            resultDiv.textContent = "Error: Could not decode emoji.";
          }
        });
    </script>
  </body>
</html>
